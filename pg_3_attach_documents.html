<section id="page_three">
    <head>
        <style>
            @import "css/styles.css";
            @import "css/attach-documents.css";
        </style>
        <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    </head>

    <div class="bg-svg"></div>
    <h3>Attach Documents</h3>
    <p>Upload the following documents. (ID front and back, KRA Pin Certificate)</p>
    <div class="upload-container">
        <div class="upload-files">
            <label for="input-file" id="drop-area">
                    <img src="images/508-icon.png" width="100px" height ="100px" alt="">
                    <p>Drag and drop your files here or </p>
                    <input type="file" type="file" accept="image/*,.pdf" id="input-file" class="browse-btn" multiple>
                    <p id="fileSizeMessage" style="color: red;"></p>
            </label>
        </div>
    
        <!-- <div class="uploaded-files">
            <p>Uploaded Files:</p>
            <div class="list">
                <li class="in-prog">
                    <div class="col">
                        <img src="images/iMZ3r9Q6k81RSz5f.png" alt="">
                    </div>
                    <div class="col">
                        <div class="file-name">
                            <div class="name">File Name Here</div>
                            <span>50%</span>
                        </div>
                        <div class="file-progress">
                            <span></span>
                        </div>
                        <div class="file-size">2.2 MB</div>
                    </div>            
                    <div class="col">
                        exit and right icon -
                        <p class="tick">&#10003;</p>
                        <p class="cross">&#10005;</p>
                    </div>
                </li>
            </div>
        </div> -->
        <div class="uploaded-files">
            <p>Uploaded Files:</p>
            <div class="list" id="uploaded-files-list"></div>
        </div>
    </div>
    <div class="btn-group">
        <button type="button" class="btn-prev" disabled>Back</button>
        <button type="button" class="btn-next">Next Step</button>
    </div>
<div>
<script>
    // document.getElementById('input-file').addEventListener('change', function() {
    //     const file = this.files[0];
    //     const maxSize = 2 * 1024 * 1024; // 2 MB in bytes

    //     if (file.size > maxSize) {
    //         document.getElementById('fileSizeMessage').innerText = 'File size exceeds 2 MB. Please choose a smaller file.';
    //         this.value = ''; // Clear the input
    //     } else {
    //         document.getElementById('fileSizeMessage').innerText = '';
    //     }
    // });
    const inputFile = document.getElementById('input-file');
    const uploadedFilesList = document.getElementById('uploaded-files-list');

    inputFile.addEventListener('change', (e) => {
        const file = e.target.files[0];
        const maxSize = 2 * 1024 * 1024; // 2 MB in bytes

        if (file.size > maxSize) {
            document.getElementById('fileSizeMessage').innerText = 'File size exceeds 2 MB. Please choose a smaller file.';
            inputFile.value = ''; // Clear the input
            return;
        }

        // Create a new list item for the uploaded file
        const listItem = document.createElement('li');
        listItem.className = 'in-prog';

        const fileIcon = document.createElement('div');
        fileIcon.className = 'col';
        fileIcon.innerHTML = `<img src="images/iMZ3r9Q6k81RSz5f.png" alt="">`;

        const fileName = document.createElement('div');
        fileName.className = 'col';
        fileName.innerHTML = `
            <div class="file-name">
                <div class="name">${file.name}</div>
                <span>100%</span>
            </div>
            <div class="file-progress">
                <span></span>
            </div>
            <div class="file-size">${formatFileSize(file.size)}</div>
        `;

        const fileActions = document.createElement('div');
        fileActions.className = 'col';
        fileActions.innerHTML = `
            <!-- exit and right icon -->
            <p class="tick">&#10003;</p>
            <p class="cross">&#10005;</p>
        `;

        listItem.appendChild(fileIcon);
        listItem.appendChild(fileName);
        listItem.appendChild(fileActions);

        uploadedFilesList.appendChild(listItem);

        // Add an event listener to the cross icon
        const crossIcon = listItem.querySelector('.cross');
        crossIcon.addEventListener('click', () => {
            // Remove the list item from the uploaded files list
            uploadedFilesList.removeChild(listItem);
        });
    });

    // Helper function to format file size
    function formatFileSize(size) {
        const units = ['B', 'KB', 'MB', 'GB'];
        let index = 0;
        while (size > 1024) {
            size /= 1024;
            index++;
        }
        return `${size.toFixed(2)} ${units[index]}`;
    }

    // Assuming you have a file input element with an ID of "fileInput"
    const fileInput = document.getElementById('fileInput');

    fileInput.addEventListener('change', (e) => {
    const files = e.target.files;
    const fileList = document.getElementById('fileList'); // Assuming you have a UL element with an ID of "fileList"

    Array.from(files).forEach((file) => {
        const listItem = document.createElement('LI');
        fileList.appendChild(listItem);

        // Upload the file using your preferred method (e.g., XMLHttpRequest, Fetch API, etc.)
        // ...

        // When the file upload is complete, add the "complete" class to the list item
        listItem.classList.add('complete');
    });
    });
</script>
</section>